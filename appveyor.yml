version: 1.0.{build}
os: Visual Studio 2015
nuget:
  account_feed: true
  project_feed: true
before_build:
- nuget restore OmniXaml.sln
build:
  project: OmniXaml.sln
  publish_nuget: true
  verbosity: minimal
deploy:
- provider: NuGet
  api_key:
    secure: WMHJXgv1b4C+5aomux4ItsdejPsSk+E6L8Yqmraho7YJzdrL2KU6rvYf61/IgsC0
  skip_symbols: true
after_test: 
    - .\packages\OpenCover.4.5.3522\OpenCover.Console.exe -register:user -target:"C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\MSTest.exe" -targetargs:"/noresults /noisolation /testcontainer:"".\MyProject Unit Tests\bin\Debug\MyProject.UnitTests.dll" -filter:"+[MyProject]*  -[MyProject]MyProject.Properties.*" -excludebyattribute:*.ExcludeFromCodeCoverage* -hideskipped:All -output:.\MyProject_coverage.xml
    - "SET PATH=C:\\Python34;C:\\Python34\\Scripts;%PATH%"
    - pip install codecov
    - codecov -f "MyProject_coverage.xml"